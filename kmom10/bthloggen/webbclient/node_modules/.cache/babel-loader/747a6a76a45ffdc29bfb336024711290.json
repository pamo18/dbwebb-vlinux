{"ast":null,"code":"var _jsxFileName = \"/Users/office/Documents/dbwebb-kurser/vlinux/me/kmom10/bthloggen/webbclient/src/components/form/Login.js\";\n\n/*eslint max-len: [\"error\", { \"code\": 170 }]*/\nimport React, { Component } from 'react';\nimport base from '../../config/api.js';\nlet api = base.api();\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.registerSubmit = this.registerSubmit.bind(this);\n    this.toggleShowPassword = this.toggleShowPassword.bind(this);\n    this.state = {\n      showing: false,\n      hidden: true,\n      button: true,\n      invalid: false\n    };\n  }\n\n  registerSubmit(event) {\n    let that = this;\n    event.preventDefault();\n    const data = new FormData(event.target);\n    let person = {\n      \"name\": data.get('name'),\n      \"password\": data.get('password')\n    };\n    fetch(api + \"/login\", {\n      method: 'POST',\n      body: JSON.stringify(person),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(function (res) {\n      if (res.data.result) {\n        localStorage.setItem(\"activeUser\", JSON.stringify(res.data.user));\n        localStorage.setItem(\"token\", JSON.stringify(res.data.token));\n        that.props.history.push('/profile');\n        window.location.reload(false);\n      } else {\n        that.setState({\n          invalid: React.createElement(\"p\", {\n            className: \"center invalid\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 46\n            },\n            __self: this\n          }, res.data.user)\n        });\n      }\n    });\n  }\n\n  toggleShowPassword() {\n    this.setState({\n      hidden: !this.state.hidden,\n      button: !this.state.button\n    });\n  }\n\n  render() {\n    let user = localStorage.getItem(\"activeUser\");\n\n    if (user === null) {\n      return React.createElement(\"div\", {\n        className: \"form-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"Login\"), React.createElement(\"p\", {\n        className: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"To be able to access the chat and edit reports you must first login.\"), React.createElement(\"form\", {\n        action: \"/profile\",\n        className: \"form-register\",\n        onSubmit: this.registerSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"form-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \"Username\", React.createElement(\"input\", {\n        className: \"form-input\",\n        type: \"text\",\n        name: \"name\",\n        required: true,\n        placeholder: \"Your username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        className: \"form-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Password\", React.createElement(\"input\", {\n        className: \"form-input password\",\n        type: this.state.hidden ? \"password\" : \"text\",\n        name: \"password\",\n        placeholder: \"Your password\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"checkbox\",\n        className: \"show-password\",\n        onClick: this.toggleShowPassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), \" \", this.state.button ? \"Show\" : \"Hide\", \" password\")), React.createElement(\"input\", {\n        className: \"button form-button center\",\n        type: \"submit\",\n        name: \"login\",\n        value: \"Login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      })), this.state.invalid);\n    } else {\n      return React.createElement(\"div\", {\n        className: \"form-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Already logged in\"));\n    }\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/office/Documents/dbwebb-kurser/vlinux/me/kmom10/bthloggen/webbclient/src/components/form/Login.js"],"names":["React","Component","base","api","Login","constructor","props","registerSubmit","bind","toggleShowPassword","state","showing","hidden","button","invalid","event","that","preventDefault","data","FormData","target","person","get","fetch","method","body","JSON","stringify","headers","then","res","json","result","localStorage","setItem","user","token","history","push","window","location","reload","setState","render","getItem"],"mappings":"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","sourcesContent":["/*eslint max-len: [\"error\", { \"code\": 170 }]*/\n\nimport React, { Component } from 'react';\nimport base from '../../config/api.js';\nlet api = base.api();\n\nclass Login extends Component {\n    constructor(props) {\n        super(props);\n        this.registerSubmit = this.registerSubmit.bind(this);\n        this.toggleShowPassword = this.toggleShowPassword.bind(this);\n        this.state = {\n            showing: false,\n            hidden: true,\n            button: true,\n            invalid: false\n        };\n    }\n    registerSubmit(event) {\n        let that = this;\n\n        event.preventDefault();\n        const data = new FormData(event.target);\n\n        let person = {\n            \"name\": data.get('name'),\n            \"password\": data.get('password')\n        };\n\n        fetch(api + \"/login\", {\n            method: 'POST',\n            body: JSON.stringify(person),\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(function (res) {\n                if (res.data.result) {\n                    localStorage.setItem(\"activeUser\", JSON.stringify(res.data.user));\n                    localStorage.setItem(\"token\", JSON.stringify(res.data.token));\n                    that.props.history.push('/profile');\n                    window.location.reload(false);\n                } else {\n                    that.setState({\n                        invalid: <p className=\"center invalid\">{res.data.user}</p>\n                    });\n                }\n            });\n    }\n    toggleShowPassword() {\n        this.setState({\n            hidden: !this.state.hidden,\n            button: !this.state.button\n        });\n    }\n    render() {\n        let user = localStorage.getItem(\"activeUser\");\n\n        if (user === null) {\n            return (\n                <div className=\"form-wrapper\">\n                    <h1>Login</h1>\n                    <p className=\"center\">To be able to access the chat and edit reports you must first login.</p>\n                    <form action=\"/profile\" className=\"form-register\" onSubmit={this.registerSubmit}>\n                        <label className=\"form-label\">Username\n                            <input className=\"form-input\" type=\"text\" name=\"name\" required placeholder=\"Your username\" />\n                        </label>\n\n                        <label className=\"form-label\">Password\n                            <input\n                                className=\"form-input password\"\n                                type={this.state.hidden ? \"password\" : \"text\"}\n                                name=\"password\"\n                                placeholder=\"Your password\"\n                                required\n                            />\n                            <p><input type=\"checkbox\" className=\"show-password\" onClick={this.toggleShowPassword} /> {this.state.button ? \"Show\" : \"Hide\"} password</p>\n                        </label>\n                        <input className=\"button form-button center\" type=\"submit\" name=\"login\" value=\"Login\" />\n                    </form>\n                    {this.state.invalid}\n                </div>\n            );\n        } else {\n            return (\n                <div className=\"form-wrapper\">\n                    <h1>Already logged in</h1>\n                </div>\n            );\n        }\n    }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}